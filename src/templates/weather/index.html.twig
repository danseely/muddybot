{% extends "base.html.twig" %}

{% block body %}
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <h1>Will it be muddy 3 days from now?</h1>
    {# <div id="muddyMessage">{{muddy}}</div> #}
    <div id="muddyMessage">Enter you zip code to see if itâ€™ll be muddy in 3 days</div>
{# 
    <br />
    <br />

    {% if zip %}
    <div>Try another Zip!</div>
    <br />
    {% endif %} #}
    <form action="{{ path('weather') }}" method="post" name="zip_submit" id="zip_submit">
        <label for="zip">Zip code:</label>
        <input type="text" id="zip" name="_zip" value="" placeholder={{ zip ?? "zip" }} />
        <br />
        <input type="submit" name="submit" id="submit" value="Submit" />
    </form>

    <div id="test" style="background-color: red;">herm</div>

    <script>
    //add jquery here
    $('#zip_submit').submit(function(e) {
        console.log("{{ zip }}");
        e.preventDefault();
        $.ajax({
            url: "/get-muddy-prediction",
            data: {'zip': "{{ zip }}"},
            success: function( result ) {
                $( "#muddyMessage" ).html(result);
            }
        });
    });
    </script>
{% endblock %}